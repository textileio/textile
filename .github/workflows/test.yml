name: Tests
on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master
jobs:
  test:
    name: Test
    runs-on: self-hosted
    steps:
      - name: Setup
        uses: setup@v1
      - name: Test
        env:
          STRIPE_API_KEY: ${{ secrets.STRIPE_API_KEY }}
        run: go test -v -timeout 45m -race -p 1 ./...